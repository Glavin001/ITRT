<html>

<head>
    <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</head>

<body>
    <h1>Is That Room Taken?</h1>

    <div class="row">
        <div class="col-md-6">
            <h2>Available</h2>
            <ul class="available">
            </ul>
        </div>
        <div class="col-md-6">
            <h2>Unavailable</h2>
            <ul class="unavailable">
            </ul>
        </div>
    </div>

    <script>
        $(document).ready(function() {

            var $available = $('.available');

            $.getJSON('/api/buildings/available')
                .then(function(results) {
                    console.log(results);
                    $available.empty();

                    results.forEach(function(building) {
                        var $li = $('<li/>').text(building._id);
                        $available.append($li);
                    });

                });


            var $unavailable = $('.unavailable');

            $.getJSON('/api/buildings/unavailable')
                .then(function(results) {
                    console.log(results);
                    $unavailable.empty();

                    results.forEach(function(building) {
                        var ac = building.active_courses[0]

                        // FIXME
                        var msg = '<strong>'+building._id + '</strong> - ' +
                            ac.subject_id + ' ' + ac.course_id + ' ' + ac.title +
                            ' from '+ac.begin_time.hours+':'+ac.begin_time.minutes +
                            ' to ' +ac.end_time.hours+':'+ac.end_time.minutes;

                        var $about = $('<p/>').html(msg);
                        var $li = $('<li/>').append($about);
                        $unavailable.append($li);
                    });

                });

        })
    </script>

</body>

</html>